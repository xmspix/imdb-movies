(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(17),s=n.n(i),r=n(10),a=n(2),o=n(32),l=n(33),u=n(4),j=new(function(){function e(){Object(o.a)(this,e),this.menu=!(window.innerWidth<=425),this.movies=[],this.collection=[],Object(u.d)(this)}return Object(l.a)(e,[{key:"setMovies",value:function(e){this.movies=e}},{key:"addToCollection",value:function(e){this.collection.push(e)}},{key:"removeFromCollection",value:function(e){this.collection=this.collection.filter((function(t){return t.id!==e}))}},{key:"toggleMenu",value:function(){this.menu?this.menu=!1:this.menu=!0}}]),e}()),d=n.p+"static/media/me.014022b9.jpg",b=n.p+"static/media/sprite.f21d71b6.svg",m=n(7),h=n(0),f=Object(m.a)((function(){var e=Object(m.a)((function(){return 0===j.collection.length?null:Object(h.jsx)("span",{className:"notification",children:j.collection.length})})),t=function(){return Object(h.jsx)("ul",{children:[{text:"Featured Movies",icon:"icon-videocam",link:"/"},{text:"My Collection",icon:"icon-heart-empty",link:"/collection",notification:!0}].map((function(t,n){return Object(h.jsx)("li",{className:"sidebar__links--item",children:Object(h.jsxs)(r.c,{to:t.link,className:"sidebar__links--link",children:[Object(h.jsx)("svg",{className:"sidebar__links--icon",children:Object(h.jsx)("use",{xlinkHref:b+"#"+t.icon})}),Object(h.jsx)("span",{children:t.text}),t.notification&&Object(h.jsx)(e,{})]})},n)}))})};return Object(h.jsxs)("div",{className:j.menu?"sidebar active":"sidebar hide",children:[Object(h.jsxs)("div",{className:"sidebar__user-profile",children:[Object(h.jsx)("img",{src:d,alt:"Mark Stoler",className:"sidebar__user-profile--image"}),Object(h.jsxs)("div",{className:"sidebar__user-info",children:[Object(h.jsx)("div",{className:"sidebar__user-info--name",children:"Hi Mark"}),Object(h.jsx)("div",{className:"sidebar__user-info--status",children:"Premium Member"})]})]}),Object(h.jsx)("div",{className:"sidebar__links",children:Object(h.jsx)(t,{})})]})})),O=n(21),v=n.n(O),x=n(36),p=n(11),N=n(13),_=n.n(N),g=function(){return{featuredMovies:function(){return _.a.get("https://stoler-imdb-api.herokuapp.com/featured-movies").then((function(e){return e.data})).catch((function(e){return e}))},topMovies:function(){return _.a.get("https://stoler-imdb-api.herokuapp.com/top-movies").then((function(e){return e.data})).catch((function(e){return e}))},trailer:function(e){return _.a.get("https://stoler-imdb-api.herokuapp.com/trailer/".concat(e)).then((function(e){return e.data})).catch((function(e){return e}))},search:function(e){return _.a.get("https://stoler-imdb-api.herokuapp.com/search/".concat(e)).then((function(e){return e.data})).catch((function(e){return e}))},movieInfo:function(e){return _.a.get("https://stoler-imdb-api.herokuapp.com/movie/".concat(e)).then((function(e){return e.data})).catch((function(e){return e}))}}},k=function(){var e=Object(c.useState)([]),t=Object(p.a)(e,2),n=t[0],i=t[1],s=Object(c.useRef)(null),a=g(),o=function(){var e=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.search(s.current.value).then((function(e){i(e.d)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){return n.filter((function(e){return"feature"===e.q})).map((function(e){return Object(h.jsx)("div",{className:"item-container",children:Object(h.jsx)(r.b,{to:"/movie/".concat(e.l.toLowerCase().match(/[a-z0-9]+/gi).join("-")+"-"+e.id),children:Object(h.jsxs)("figure",{className:"item",children:[e.i&&Object(h.jsx)("img",{src:e.i.imageUrl,alt:e.l}),Object(h.jsxs)("div",{className:"info",children:[Object(h.jsxs)("span",{className:"title",children:[e.l," (",e.y,")"]}),Object(h.jsx)("span",{className:"actors",children:e.s})]})]})})},e.id)}))};return Object(h.jsxs)("div",{className:"autocomplete",children:[Object(h.jsx)("input",{type:"text",placeholder:"Search...",className:"search",ref:s,onChange:function(){return o()}}),n?Object(h.jsx)("div",{className:"autocomplete-items",children:Object(h.jsx)(l,{})}):null]})},y=Object(m.a)((function(){return Object(h.jsx)("svg",{className:"sidebar__links--icon menu",onClick:function(){return j.toggleMenu()},children:Object(h.jsx)("use",{xlinkHref:b+"#icon-menu"})})})),M=function(e){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(f,{}),Object(h.jsxs)("div",{className:"main-section",children:[Object(h.jsxs)("div",{className:"topbar",children:[Object(h.jsx)(y,{}),Object(h.jsx)(k,{})]}),e.children]})]})},C=function(e){var t=e.cb;return Object(h.jsx)("button",{className:"btn-sm-red",onClick:t,children:"X"})},w=function(e){var t=e.cb;return Object(h.jsx)("button",{className:"btn-sm-red",onClick:t,children:Object(h.jsx)("svg",{className:"icon",children:Object(h.jsx)("use",{xlinkHref:b+"#icon-heart-empty"})})})},H=Object(m.a)((function(e){var t=e.array,n=e.buttons;return t.map((function(e,t){return Object(h.jsxs)("div",{className:"movie-card",children:[Object(h.jsxs)(r.b,{to:"/movie/".concat(e.seo),children:[Object(h.jsxs)("div",{className:"movie-card__poster",children:[Object(h.jsx)("img",{src:e.poster.replace("_V1_","_V1_UX400_CR0,0,_AL_"),alt:e.title,className:"movie-card__poster--image"}),Object(h.jsxs)("div",{className:"overlay",children:[Object(h.jsxs)("span",{className:" overlay--info",children:["Year: ",e.year]}),Object(h.jsxs)("span",{className:" overlay--info",children:["Runtime: ",e.runtime]}),Object(h.jsxs)("span",{className:" overlay--info",children:["Genre: ",e.genre.replace(/,/g,", ")]}),Object(h.jsxs)("span",{className:" overlay--info",children:["Director: ",e.director.replace(/,/g,", ")]})]})]}),Object(h.jsxs)("div",{className:"movie-card__poster--info",children:[e.title," (",e.year,")"]})]}),n?Object(h.jsx)(C,{cb:function(){return j.removeFromCollection(e.id)}}):(c=e.id,!j.collection.filter((function(e){return e.id===c}))[0]&&Object(h.jsx)(w,{cb:function(){return j.addToCollection(e)}}))]},t);var c}))})),L=function(){return Object(h.jsx)("div",{className:"loader"})},S=Object(m.a)((function(){var e=g();return Object(c.useEffect)((function(){e.featuredMovies().then((function(e){j.setMovies(e)}))}),[]),j.movies?Object(h.jsx)("div",{className:"movies-list",children:Object(h.jsx)(H,{array:j.movies})}):Object(h.jsx)(L,{})})),I=Object(m.a)((function(e){var t=e.match.params,n=g(),i=Object(c.useState)(!1),s=Object(p.a)(i,2),r=s[0],a=s[1],o=Object(c.useState)(j.movies.filter((function(e){return e.seo===t.title}))[0]),l=Object(p.a)(o,2),u=l[0],d=l[1];Object(c.useEffect)((function(){u?n.trailer(u.id).then((function(e){return a(e)})):n.movieInfo(t.title.split("-").pop()).then((function(e){d(e),n.trailer(e.id).then((function(e){return a(e)}))}))}),[]);var m=function(){var e=r.filter((function(e){return"1080p"===e.definition||"720p"===e.definition||"480p"===e.definition}))[0];return Object(h.jsxs)("video",{id:"backgroundvid",poster:u.poster,autoPlay:!0,controls:!0,playsInline:!0,children:[Object(h.jsx)("source",{src:e.url,type:e.mimeType}),"Your browser does not support the video tag. I suggest you upgrade your browser."]})},f=!1;if(u){var O=!!j.collection.filter((function(e){return e.title===u.title}))[0];return Object(h.jsxs)("div",{className:"movie-container",children:[Object(h.jsxs)("div",{className:"movie-container__header",children:[Object(h.jsx)("img",{src:u.poster,alt:u.title,className:"movie-container__header--poster"}),Object(h.jsxs)("div",{className:"movie-container__header--info",children:[Object(h.jsxs)("div",{className:"movie-container__header--info-title",children:[Object(h.jsx)("h1",{children:u.title}),Object(h.jsx)("svg",{className:"movie-container__header--info-title--icon ".concat(O?"icon-active":null),onClick:function(){return O?null:j.addToCollection(u)},onMouseOver:function(){return f=!0},onMouseLeave:function(){return f=!1},children:f||O?Object(h.jsx)("use",{xlinkHref:b+"#icon-heart-full"}):Object(h.jsx)("use",{xlinkHref:b+"#icon-heart-empty"})})]}),Object(h.jsx)("p",{className:"movie-container__header--description",children:u.intro})]})]}),Object(h.jsx)("div",{className:"movie-container__trailer",children:r?Object(h.jsx)(m,{}):Object(h.jsx)(L,{})})]})}return null})),E=Object(m.a)((function(){return 0===j.collection.length?Object(h.jsx)("div",{className:"center-screen",children:"no collection"}):Object(h.jsx)("div",{className:"movies-list",children:Object(h.jsx)(H,{array:j.collection,buttons:!0})})})),T=n(22),F=function(){var e=Object(c.useState)({movies:[],redirect:!1,isLoaded:!1}),t=Object(p.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){fetch("http://localhost:3001/api/trending").then((function(e){return e.json()})).then((function(e){i(Object(T.a)(Object(T.a)({},n),{},{movies:e,isLoaded:!0}))}))}),[]),n.isLoaded?Object(h.jsx)("div",{className:"movies-list",children:Object(h.jsx)(H,{array:n.movies})}):Object(h.jsx)(L,{})},R=function(){return Object(h.jsx)(r.a,{basename:"imdb-movies",children:Object(h.jsx)(a.c,{children:Object(h.jsxs)(M,{children:[Object(h.jsx)(a.a,{path:"/",component:S,exact:!0}),Object(h.jsx)(a.a,{path:"/movie/:title",component:I,exact:!0}),Object(h.jsx)(a.a,{path:"/collection",component:E,exact:!0}),Object(h.jsx)(a.a,{path:"/trending",component:F,exact:!0})]})})})};n(68);s.a.render(Object(h.jsx)(R,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.0f4b84cf.chunk.js.map